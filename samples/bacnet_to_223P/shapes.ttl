@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix bacnet: <urn:bacnet-autoscan/bacnet#> .
@prefix s223: <http://data.ashrae.org/standard223#> .

# Shape 1: Validate Devices
# Every node of type bacnet:BACnetDevice must have exactly one IP and one Instance.
bacnet:DeviceShape
    a sh:NodeShape ;
    sh:targetClass bacnet:BACnetDevice ;
    sh:property [
        sh:path bacnet:ipAddress ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:message "Device must have exactly one IP address string." ;
    ] ;
    sh:property [
        sh:path bacnet:deviceInstance ;
        sh:datatype xsd:integer ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:message "Device must have exactly one integer Instance ID." ;
    ] .

# Shape 2: Validate Points
# Every Quantifiable point must have a present value.
bacnet:PointShape
    a sh:NodeShape ;
    sh:targetClass s223:QuantifiableObservableProperty ;
    sh:property [
        sh:path bacnet:presentValue ;
        sh:minCount 1 ;
        sh:message "Real-world points must have a present value!" ;
    ] .